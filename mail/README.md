# mobi mail <!-- omit in toc -->

## Contents <!-- omit in toc -->
- [Mailservers Overview](#mailservers-overview)
  - [MDA (Mail Delivery Agent)](#mda-mail-delivery-agent)
    - [List of MDAs](#list-of-mdas)
  - [MTA (Mail Transfer Agent)](#mta-mail-transfer-agent)
  - [MSA (Mail Submission Agent)](#msa-mail-submission-agent)
    - [Overview](#overview)
    - [Benefits](#benefits)
  - [MUA (Mail User Agent)](#mua-mail-user-agent)
  - [Antispam](#antispam)
  - [Antivirus](#antivirus)
  - [Identity Management](#identity-management)
- [Why and what we need (in) a mailserver](#why-and-what-we-need-in-a-mailserver)
  - [Features](#features)
- [Open Source Mailserver Solutions](#open-source-mailserver-solutions)
  - [Apache James](#apache-james)
  - [Modoboa](#modoboa)
  - [hmailserver](#hmailserver)

## Mailservers Overview
> _Setting up and maintaining a full-fledged email server is a complicated task. You need to be a technology expert and a good sysadmin to set it up._ - [cyberciti.biz](https://www.cyberciti.biz/open-source/awesome-complete-open-source-mail-servers-solutions-for-linux-unix/)

[List of Mailserver Software](https://en.wikipedia.org/wiki/List_of_mail_server_software) 

Mailservers are made up of a couple of components:
### MDA (Mail Delivery Agent)
> _A mail delivery agent or message delivery agent (MDA) is a computer software component that is responsible for the delivery of e-mail messages to a local recipient's mailbox. It is also called a local delivery agent (LDA). Within the Internet mail architecture, local message delivery is achieved through a process of handling messages from the message transfer agent, and storing mail into the recipient's environment (typically a mailbox)_ - [Wikipedia](https://en.wikipedia.org/wiki/Mail_delivery_agent)

#### List of MDAs
- Cyrus IMAP
- dovecot
- fetchmail
- getmail
- fdm
- maildrop
- procmail
- bin/mail - part of Sendmail

### MTA (Mail Transfer Agent)
> _Within the Internet email system, a message transfer agent or mail transfer agent (MTA) or mail relay is software that transfers electronic mail messages from one computer to another using SMTP. The terms mail server, mail exchanger, and MX host are also used in some contexts. Messages exchanged across networks are passed between mail servers, including any attached data files (such as images, multimedia or documents). These servers also often keep mailboxes for email. Access to this email by end users is typically either via webmail or an email client._ - [Wikipedia](https://en.wikipedia.org/wiki/Message_transfer_agent)

### MSA (Mail Submission Agent)
#### Overview
> _A message submission agent (MSA) or mail submission agent is a computer program or software agent that receives electronic mail messages from a mail user agent (MUA) and cooperates with a mail transfer agent (MTA) for delivery of the mail. It uses ESMTP, a variant of the Simple Mail Transfer Protocol (SMTP), as specified in RFC 6409. Many MTAs perform the function of an MSA as well, but there are also programs that are specially designed as MSAs without full MTA functionality. Historically, in Internet mail, both MTA and MSA functions use port number 25, but the official port for MSAs is 587. The MTA accepts a user's incoming mail, while the MSA accepts a user's outgoing mail._

This could be optional, however, using a sperate MSA and MTA has the brings some benefits.
#### Benefits
1. One benefit is that an MSA, since it is interacting directly with the author's MUA, can correct minor errors in a message's format (such as a missing Date, Message-ID, To fields, or an address with a missing domain name) and/or immediately report an error to the author so that it can be corrected before it is sent to any of the recipients. An MTA accepting a message from another site cannot reliably make those kinds of corrections, and any error reports generated by such an MTA will reach the author (if at all) only after the message has already been sent.
   
2. One more benefit is that with a dedicated port number, 587, it is always possible for users to connect to their domain to submit new mail. To combat spam (including spam being sent unwittingly by a victim of a botnet) many ISPs and institutional networks restrict the ability to connect to remote MTAs on port 25. The accessibility of an MSA on port 587 enables nomadic users (for example, those working on a laptop) to continue to send mail via their preferred submission servers even from within others' networks. Using a specific submission server is a requirement when sender policies or signing practices are enforced.
   
3. Another benefit is that separating the MTA and MSA functions makes it easier for an MTA to deny relaying, that is to refuse any mail that is not addressed to a recipient at a domain that is served locally. This is a strategy used by ISPs to prevent the sending of spam from virus-infected client computers. By contrast, an MSA must generally accept mail for any recipient on the Internet, though it only accepts such mail from authors who are authorized to use that MSA and who have established their identity to the MSA via authentication. In times when both mail submission and acceptance of incoming mail were usually accomplished using the same protocol and the same server, the ability to send mail to arbitrary destinations without authentication allowed spammers to use MTAs as a means of distributing spam (since a single message transaction can request that an MTA relay a message to a large number of recipients), and also made it more difficult to trace a message to its origin.
   
4. Yet another benefit is that MSAs and MTAs can have different policies for filtering of spam. Most MSAs require authentication in the form of a username and password provided by the author. Any messages received by such an MSA are therefore traceable to an author who has a direct relationship with the MSA, and who can be held accountable for his actions. This allows the MSA to have either no spam filtering, or more permissive spam filtering than an MTA that exists for the purpose of accepting incoming email from other domains. It is difficult to establish trust in mail sent between arbitrary domains, because there is generally no direct relationship between those domains via which trust, or even identity, can be established. In the absence of such trust, an MTA must generally rely on heuristics and third-party reputation services to distinguish spam from legitimate traffic, and both of these mechanisms have a history of being error-prone. The separation of MSA and MTA therefore avoids the use of unreliable spam recognition mechanisms during mail submission, and increases the probability for legitimate mail to be delivered successfully.


All infos from [Wikipedia](https://en.wikipedia.org/wiki/Message_submission_agent)

### MUA (Mail User Agent)
Also webmail or any other email client.
Additionally we need an automated mail user agent for exporting emails to import into mattermost.

### Antispam
### Antivirus

### Identity Management


## Why and what we need (in) a mailserver
Email is still at the core of every business communication. Ensuring a functional and complete email service therefore is vital.

Additionally, many of the other services we offer need a mailserver to send out invitations and email notifications (calendar, mattermost, nextcloud)


### Features
- SMTP Server
- Webmail
- Integration with Mail apps


## Open Source Mailserver Solutions

### Apache James

Website: https://james.apache.org/

### Modoboa

Website: https://modoboa.org/en/

### hmailserver

Website: https://www.hmailserver.com/



We will need to set up an smtp server with every instance if they do not supply us with one.